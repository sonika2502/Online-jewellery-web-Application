(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var aa=this||self;function k(a,b){a=a.split(".");var d=aa;a[0]in d||"undefined"==typeof d.execScript||d.execScript("var "+a[0]);for(var c;a.length&&(c=a.shift());)a.length||void 0===b?d[c]&&d[c]!==Object.prototype[c]?d=d[c]:d=d[c]={}:d[c]=b};var l={},m=null;
function n(a){var b;void 0===b&&(b=0);if(!m){m={};for(var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),c=["+/=","+/","-_=","-_.","-_"],e=0;5>e;e++){var f=d.concat(c[e].split(""));l[e]=f;for(var g=0;g<f.length;g++){var h=f[g];void 0===m[h]&&(m[h]=g)}}}b=l[b];d=Array(Math.floor(a.length/3));c=b[64]||"";for(e=f=0;f<a.length-2;f+=3){var v=a[f],w=a[f+1];h=a[f+2];g=b[v>>2];v=b[(v&3)<<4|w>>4];w=b[(w&15)<<2|h>>6];h=b[h&63];d[e++]=g+v+w+h}g=0;h=c;switch(a.length-f){case 2:g=
a[f+1],h=b[(g&15)<<2]||c;case 1:a=a[f],d[e]=b[a>>2]+b[(a&3)<<4|g>>4]+h+c}return d.join("")};var p="undefined"!==typeof Uint8Array,q={};let r;var t=class{constructor(a){if(q!==q)throw Error("illegal external caller");this.B=a;if(null!=a&&0===a.length)throw Error("ByteString should be constructed with non-empty values");}};const u=Symbol(void 0);function x(a,b){Object.isFrozen(a)||(u?a[u]|=b:void 0!==a.l?a.l|=b:Object.defineProperties(a,{l:{value:b,configurable:!0,writable:!0,enumerable:!1}}))}function y(a,b){Object.isExtensible(a)&&(u?a[u]&&(a[u]&=~b):void 0!==a.l&&(a.l&=~b))}function z(a){let b;u?b=a[u]:b=a.l;return null==b?0:b}function A(a,b){u?a[u]=b:void 0!==a.l?a.l=b:Object.defineProperties(a,{l:{value:b,configurable:!0,writable:!0,enumerable:!1}})}function B(a){x(a,1);return a}
function ba(a){x(a,17);return a}function C(a){return a?!!(z(a)&2):!1}function D(a){if(!Array.isArray(a))throw Error("cannot mark non-array as shared mutably");y(a,16)};var E={};function F(a){return null!==a&&"object"===typeof a&&!Array.isArray(a)&&a.constructor===Object}var G=Object.freeze(B([]));function H(a){if(C(a.i))throw Error("Cannot mutate an immutable Message");}function I(a){return{value:a,configurable:!1,writable:!1,enumerable:!1}};function ca(a){switch(typeof a){case "number":return isFinite(a)?a:String(a);case "object":if(a&&!Array.isArray(a)){if(p&&null!=a&&a instanceof Uint8Array)return n(a);if(a instanceof t){const b=a.B;return null==b?"":"string"===typeof b?b:a.B=n(b)}}}return a};function J(a,b,d){if(null!=a){if(Array.isArray(a))a=K(a,b,d);else if(F(a)){const c={};for(let e in a)c[e]=J(a[e],b,d);a=c}else a=b(a);return a}}function K(a,b,d){const c=Array.prototype.slice.call(a);d(a,c);for(a=0;a<c.length;a++)c[a]=J(c[a],b,d);return c}function L(a){if(a.v===E)return a.toJSON();a=ca(a);return Array.isArray(a)?K(a,L,M):a}function M(){};function N(a){return a.g||(a.g=a.i[a.j+a.h]={})}function O(a,b,d=!1){return-1===b?null:b>=a.j?a.g?a.g[b]:void 0:d&&a.g&&(d=a.g[b],null!=d)?d:a.i[b+a.h]}function P(a,b,d,c=!1,e=!1){e||H(a);a.s&&(a.s=void 0);b>=a.j||c?N(a)[b]=d:(void 0!==a.g&&a.j>=a.i.length?(c=a.i.length-1,e=b+a.h,e>=c?(a.i[c]=void 0,a.i[e]=d,a.i.push(a.g)):a.i[e]=d):a.i[b+a.h]=d,void 0!==a.g&&b in a.g&&delete a.g[b])}function Q(a,b){a=O(a,b);return null==a?a:!!a}function R(a,b,d,c){H(a);d!==c?P(a,b,d):P(a,b,void 0,!1)}
function S(a,b,d){const c=O(a,d,!1);{let f=!1;var e=null==c||"object"!==typeof c||(f=Array.isArray(c))||c.v!==E?f?new b(c):void 0:c}e!==c&&null!=e&&(P(a,d,e,!1,!0),x(e.i,z(a.i)&-33));b=e;if(null==b)return b;C(b.i)&&!C(a.i)&&(b=b.A(),P(a,d,b,!1));return b}function T(a,b){return null==a?b:a};function da(a,b){if(null==b||""==b)return new a;b=JSON.parse(b);if(!Array.isArray(b))throw Error(void 0);x(b,16);U=b;a=new a(b);U=null;return a}
var V=class{constructor(a,b,d){a||(a=U);U=null;var c=this.constructor.g||0,e=0<c,f=this.constructor.h,g=!1;if(!a){var h=f?[f]:[];x(h,48);a=h;h=!0}else if(h=!!(z(a)&16))g=z(a),A(a,g|32),g=!!(g&32);e&&0<a.length&&F(a[a.length-1])&&"g"in a[a.length-1]&&(c=0);this.h=(f?0:-1)-c;this.m=void 0;this.i=a;a:{f=this.i.length;c=f-1;if(f&&(f=this.i[c],F(f))){this.g=f;b=Object.keys(f);0<b.length&&Array.prototype.every.call(b,isNaN,void 0)?this.j=Number.MAX_VALUE:this.j=c-this.h;break a}void 0!==b&&-1<b?(this.j=
Math.max(b,c+1-this.h),this.g=void 0):this.j=Number.MAX_VALUE}if(!e&&this.g&&"g"in this.g)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(d)for(e=h&&!g?ba:B,b=0;b<d.length;b++)h=d[b],h<this.j?(h+=this.h,(g=this.i[h])?Array.isArray(g)&&e(g):this.i[h]=G):(g=N(this),(c=g[h])?Array.isArray(c)&&e(c):g[h]=G)}toJSON(){return K(this.i,L,M)}};V.prototype.v=E;V.prototype.toString=function(){return this.i.toString()};let U;function ea(a,b,d,c,e,f){if(a=a.m&&a.m[d]){c=f.o?B(a.slice()):a;H(b);if(null!=c){e=B([]);f=!1;for(a=0;a<c.length;a++)e[a]=c[a].i,f=f||C(e[a]);b.m||(b.m={});b.m[d]=c;c=e;f?y(c,8):x(c,8)}else b.m&&(b.m[d]=void 0),e=G;P(b,d,e)}else p&&c instanceof Uint8Array?e=c.length?new t(new Uint8Array(c)):r||(r=new t(null)):(Array.isArray(c)&&(e?x(c,2):c&&z(c)&1&&f.o?(e=Array.prototype.slice.call(c),A(e,(z(c)|0)&-51),c=e):D(c)),e=c),P(b,d,e)};var fa=class extends V{A(){return this}};Object.defineProperties(fa,{[Symbol.hasInstance]:I(()=>{throw Error(void 0);})});class W extends fa{A(){if(C(this.i)){var {o:a}={o:!0};a={o:a};const d=C(this.i);if(d&&!a.o)throw Error("copyRepeatedFields must be true for frozen messages");d||D(this.i);const c=new this.constructor;this.u&&(c.u=this.u.slice());const e=this.i;for(let f=0;f<e.length;f++){const g=e[f];if(f===e.length-1&&F(g))for(b in g){const h=+b;Number.isNaN(h)?N(c)[b]=g[b]:ea(this,c,h,g[b],d,a)}else ea(this,c,f-this.h,g,d,a)}var b=c;b.s=this}else b=this;return b}}Object.defineProperties(W,{[Symbol.hasInstance]:I(Object[Symbol.hasInstance])});var ia=class extends W{constructor(a){super(a,-1,ha)}},ha=[8];var ka=class extends W{constructor(a){super(a,-1,ja)}},ja=[17];var ma=class extends W{constructor(a){super(a,-1,la)}},la=[27];var na=class extends W{constructor(a){super(a)}};var pa=class extends W{constructor(a){super(a,-1,oa)}},oa=[1,2,3,6];/*

 SPDX-License-Identifier: Apache-2.0
*/
function X(a,b){a=a.getElementsByTagName("META");for(let d=0;d<a.length;++d)if(a[d].getAttribute("name")===b)return a[d].getAttribute("content")||"";return""};function qa(a){if(!(0<a.g.length)){var b=X(a.body,"environment");for(const d of b.split("|"))d&&a.g.push(d)}}function Y(a,b){a=a.body;var d={detail:void 0};let c;"function"===typeof window.CustomEvent?c=new CustomEvent(b,d):(c=document.createEvent("CustomEvent"),c.initCustomEvent(b,!!d.bubbles,!!d.cancelable,d.detail));a.dispatchEvent(c)}
var ra=class{constructor(a){this.body=a;this.g=[];this.h={};X(a,"sampling_mod");var b=X(a,"namespace");if(!b){b="ns-"+(0,Math.random)().toString(36).substr(2,5);a:{var d=a.getElementsByTagName("META");for(let c=0;c<d.length;++c)if("namespace"===d[c].getAttribute("name")&&d[c].getAttribute("index")===(0).toString()){d[c].setAttribute("content",b);break a}d=a.querySelector("#mys-meta");d||(d=document.createElement("div"),d.id="mys-meta",d.style.position="absolute",d.style.display="none",a.appendChild(d));
a=document.createElement("META");a.setAttribute("name","namespace");a.setAttribute("content",b);a.setAttribute("index",(0).toString());d.appendChild(a)}}qa(this);!this.h.hasOwnProperty("META_LOCKED")&&(a=X(this.body,"custom_flags"))&&(this.h=JSON.parse(a))}addEventListener(a,b){this.body.addEventListener(a,b)}};var sa=class extends W{constructor(){super(void 0)}};function ta(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function ua(a){if(1>=a.h.offsetWidth||1>=a.h.offsetHeight)return!1;a.g.remove();Y(a.context,"spanReady");return!0}
var va=class{constructor(a,b){this.context=a;this.j=b;this.h=ta("SPAN");this.g=ta("DIV");this.h.style.fontSize="6px";this.h.textContent="go";this.g.style.position="absolute";this.g.style.top="100%";this.g.style.left="100%";this.g.style.width="1px";this.g.style.height="0";this.g.style.overflow="hidden";this.g.style.visibility="hidden";this.g.appendChild(this.h)}wait(){if(!T(Q(this.j,1),!1)&&(Y(this.context,"spanStart"),this.context.body.appendChild(this.g),!ua(this)))return new Promise(a=>{const b=
setInterval(()=>{ua(this)&&(clearInterval(b),a())},T(O(this.j,3),0))})}};var wa=class{constructor(a,b){this.context=a;this.h=S(b,ma,1);this.g=S(b,ia,12)||new ia;S(this.h,ka,10)||new ka}};function xa(a){a.j.length=0;a.h=!0}function ya(a,b){a.g=!0;const d=()=>{a.h=!1;const c=a.j.shift();return void 0===c?(a.g=!1,Promise.resolve()):ya(a,c())};return b?b.then(d,()=>{if(a.h)return d();a.g=!1;return Promise.reject()}):d()}function za(a,b){for(const d of b)a.j.push(d);if(!a.g)return ya(a)}var Aa=class{constructor(){this.h=this.g=!1;this.j=[]}};var Ba=class{constructor(){(this.g=!(!window.mys||!window.mys.pingback))&&this.setData(43,Date.now()-window.mys.pingback.getBaseTime())}setAttribute(a,b){this.g&&window.mys.pingback.setAttribute(a,b)}setData(a,b){this.g&&window.mys.pingback.setData(a,b,3)}send(a){this.g&&window.mys.pingback.send(a)}};function Ca(a){xa(a.h);return za(a.h,[()=>{},()=>{let b;var d=a.j;const c=new sa;R(c,3,100,0);R(c,4,1E4,0);Q(d.g,3)&&R(c,2,!0,!1);d=d.context;qa(d);0<=d.g.indexOf("amp")&&R(c,2,!0,!1);c&&(b=(new va(a.context,c)).wait());Y(a.context,"browserStart");Y(a.context,"browserStartEnd");a.g&=-31;a.g|=2;return b},()=>{Y(a.context,"browserReady");Y(a.context,"browserReadyEnd");a.g|=4;Y(a.context,"overallReady")},()=>{Y(a.context,"browserQuiet");Y(a.context,"browserQuietEnd");a.g|=8}])}
function Da(a){da(pa,X(a.context.body,"engine_msg")||"[]");return Ca(a)||Promise.resolve()}
var Ea=class{constructor(a,b){this.context=a;this.j=b;this.pingback=new Ba;this.h=new Aa;this.g=0}init(){this.g&=-31;this.g|=1;let a;null==(a=window.AFMA_Communicator)||a.addEventListener("onshow",()=>{this.g|=32});let b=0;const d=this.context.body;d.addEventListener("browserRender",()=>{++b;if(1===b)Y(this.context,"overallStart"),Da(this).then(()=>{Y(this.context,"overallQuiet")});else{var c=d.clientHeight;d.clientWidth&&c&&Da(this)}})}};let Z;k("mys.engine.init",(a,b)=>{a=da(na,X(b,"render_config")||"[]");b=new ra(b);a=new wa(b,a);Z=new Ea(b,a);Z.init()});k("mys.engine.stage",()=>{let a;return(null==(a=Z)?void 0:a.g)||0});}).call(this);
